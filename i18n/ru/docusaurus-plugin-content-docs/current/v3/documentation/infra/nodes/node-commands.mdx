# Флаги командной строки TON узла

Этот документ описывает различные флаги и параметры, доступные при запуске узла TON. Каждый флаг имеет короткое имя, длинное имя, значение по умолчанию (если это применимо) и описание его функциональности.

## Основные параметры

| Вариант                          | Описание                                                                                                                               | По умолчанию                       | Использование                                       |
| -------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------- | --------------------------------------------------- |
| `-v`, `--verbosity`              | Устанавливает уровень детализации вывода журнала.                                                                                      | `INFO` (2)                         | `-v <level>` (например, `-v 2`)                     |
| `-V`, `--version`                | Показывает информацию о сборке движка валидаторов.                                                                                     | Н/Д                                | `-V`                                                |
| `-h`, `--help`                   | Печатает справочную информацию.                                                                                                        | Н/Д                                | `-h`                                                |
| `-C`, `--global-config`          | Определяет файл для чтения глобальной конфигурации (загрузочные узлы, публичные liteserver, блоки инициализации и т.д.).               | Н/Д                                | `-C <file>`                                         |
| `-c`, `--local-config`           | Указывает файл для записи/чтения конфигурации локального узла (адреса, ключи и т.д.).                                                  | Н/Д                                | `-c <file>`                                         |
| `-I`, `--ip`                     | Определяет IP адрес и порт экземпляра. Используется во время первого запуска.                                                          | Н/Д                                | `-Я <ip:port>`                                      |
| `-D`, `--db`                     | Определяет корневой каталог баз данных.                                                                                                | Н/Д                                | `-D <path>`                                         |
| `-f`, `--fift-dir`               | Каталог содержит скрипты Fift.                                                                                                         | Н/Д                                | `-f <path>`                                         |
| `-d`, `--daemonize`              | Демонстрирует процесс, закрывая стандартный ввод и создавая новую сессию.                                                              | Отключено                          | `-d`                                                |
| `-l`, `--logname`                | Указывается файл журнала для записи журналов.                                                                                          | Н/Д                                | `-l <file>`                                         |
| `-s`, `--state-ttl`              | Устанавливает TTL (time-to-live) для состояния в секундах.                                                                             | `86400` секунд (1 день)            | `-s <seconds>`                                      |
| `-m`, `--mempool-num`            | Максимальное количество внешних сообщений в мемпуле.                                                                                   | Неограниченный                     | `-m <number>`                                       |
| `-b`, `--block-ttl`              | Устанавливает TTL для блоков в секундах.                                                                                               | `86400` секунд (1 день)            | `-b <seconds>`                                      |
| `-A`, `--archive-ttl`            | Устанавливает TTL для архивных блоков в секундах.                                                                                      | `604800` секунд (7 дней)           | `-A <seconds>`                                      |
| `-K`, `--key-proof-ttl`          | Устанавливает TTL для блоков клавиш в секундах.                                                                                        | `315360000` секунд (10 лет)        | `-K <seconds>`                                      |
| `-S`, `--sync-before`            | Во время первоначальной синхронизации скачайте все блоки за последнее количество секунд.                                               | `3600` секунд (1 час)              | `-S <seconds>`                                      |
| `-t`, `--threads`                | Количество используемых потоков.                                                                                                       | `7`                                | `-т <number>`                                       |
| `-u`, `--user`                   | Изменяет запускающий процесс пользователя.                                                                                             | Н/Д                                | `-u <username>`                                     |

## Расширенные настройки

| Вариант                               | Описание                                                                                                                                                                            | По умолчанию                       | Использование                                           |
| ------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------- | ------------------------------------------------------- |
| `--shutdown-at`                       | Устанавливает валидатор для выключения в заданном тайме Unix.                                                                                                                       | Н/Д                                | \`--shutdown-at <timestamp>                             |
| `-T`, `--truncate-db`                 | Разрезает базу данных с указанным порядковым номером как новый номер последовательности верхних блоков.                                                                             | Н/Д                                | `-T <seqno>`                                            |
| `-U`, `--unsafe-catchain-restore`     | Включает медленный и опасный метод восстановления лова.                                                                                                                             | Отключено                          | `-U <catchain-seqno>`                                   |
| `-F`, `--unsafe-catchain-rotate`      | Включает мощное и опасное вращение лова.                                                                                                                                            | Отключено                          | `-F <block-seqno>:<catchain-seqno>:<height>`            |
| `--celldb-compress-depth`             | Оптимизирует CellDb путем хранения клеток глубины X целым поддеревом.                                                                                                               | `0` (отключен)                     | `--celldb-compress-depth <depth>`                       |
| `--max-archive-fd`                    | Устанавливает ограничение на количество открытых файловых дескрипторов в менеджере архивов. `0` для неограниченного количества.                                                     | `0` (неограниченно)                | `--max-archive-fd <number>`                             |
| `--archive-preload-период`            | Предварительно загружает архивные ломтики на последние X секунд при запуске.                                                                                                        | `0` секунд (отключено)             | `--archive-preload-period <seconds>`                    |
| `--enable-precompiled-smc`            | Включает выполнение предварительно скомпилированных смарт-контрактов (экспериментальных).                                                                                           | Отключено                          | `--enable-precompiled-smc`                              |
| `--disable-rocksdb-stats`             | Отключает сбор статистики RocksDb.                                                                                                                                                  | Включено                           | `--disable-rocksdb-stats`                               |
| `--nonfinal-ls`                       | Включает специальные локальные запросы (LS) к незавершённым блокам.                                                                                                                 | Отключено                          | `--nonfinal-ls`                                         |
| `--celldb-cache-size`                 | Устанавливает размер кэша блоков RocksDb в CellDb, в байтах.                                                                                                                        | `1G` (1 Gigabyte)                  | `--celldb-cache-size <size>`                            |
| `--celldb-direct-io`                  | Включает режим прямого ввода/вывода для RocksDb в CellDb (применяется только когда размер кэша >= 30G).                                                                             | Отключено                          | `--celldb-direct-io`                                    |
| `--celldb-preload-all`                | Предварительно загружает все ячейки из CellDb при запуске.                                                                                                                          | Отключено                          | `--celldb-preload-all`                                  |
| `--celldb-in-memory`                  | Сохраняет всю мобильную память в памяти. Для валидаторов с настройками по умолчанию размер сотовой сети ~80-100GB, поэтому абсолютно необходимо 128 Гб и предпочтение отдается 256. | Отключено                          | `--celldb-in-memory`                                    |
| `--catchain-max-block-delay`          | Устанавливает задержку перед созданием нового блока ловкости, в секундах.                                                                                                           | `0.4` секунды                      | `--catchain-max-block-delay <seconds>`                  |
| `--catchain-max-block-delay-slow`     | Устанавливает максимальную задержку расширенных блоков для слишком длинных раундов в секундах.                                                                                      | `1.0` секунд                       | `--catchain-max-block-delay-slow <seconds>`             |
| `--fast-state-serializer`             | Включает более быстрый сериализатор состояний, требует больше ОЗУ.                                                                                                                  | Отключено                          | `--fast-state-serializer`                               |

## Настройки Журнала сессий

| Вариант                          | Описание                                                                                                          | По умолчанию                          | Использование                                  |
| -------------------------------- | ----------------------------------------------------------------------------------------------------------------- | ------------------------------------- | ---------------------------------------------- |
| `--session-logs`                 | Файл для статистики сеансов валидатора.                                                                           | `{logname}.session-stats`             | `--session-logs <file>`                        |
