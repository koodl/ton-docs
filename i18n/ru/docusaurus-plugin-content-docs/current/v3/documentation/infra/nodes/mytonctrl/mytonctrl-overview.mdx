# MyTonCtrl

## Общий обзор

Чтобы установить и управлять своим узлом, используйте инструмент с открытым исходным кодом **MyTonCtrl**, разработанный Фондом TON. Большинство TON Nodes проверены **MyTonCtrl**.

[MyTonCtrl](https://github.com/ton-blockchain/mytonctrl) — это консольное приложение, которое является удобным для fift, lite-client, и validator-engine-console. Он был специально разработан для упрощения задач управления кошельками, доменами и валидаторами в операционной системе Linux.

Мы активно ищем обратную связь о процессе установки. Если у вас есть вопросы или предложения, [свяжитесь с нами](https://t.me/Alexgton).

## Общие команды

### помощь

Нет аргов, печать справки

### очистить

Нет аргов, четкая консоль

### выйти

Нет аргонов, выйти из консоли.

### Обновить

Обновить mytonctrl. Комбинации параметров:

| Имя формата                  | Формат                                                                       | Пример                                                                  | Описание                                                                        |
| :--------------------------- | :--------------------------------------------------------------------------- | :---------------------------------------------------------------------- | ------------------------------------------------------------------------------- |
| Без дуг                      | `обновить`                                                                   | `обновить`                                                              | Обновить из текущего репозитория                                                |
| Формат URL                   | `update [https://github.com/author/repo/tree/branch]`                        | `обновите https://github.com/ton-blockchain/mytonctrl/tree/test`        | Обновить по указанному URL                                                      |
| Формат только ветки          | \`обновить [BRANCH]                                                          | `обновить тест`                                                         | Обновить из указанной ветки репозитория                                         |
| Формат переопределения ветки | `update [https://github.com/authorName/repoName/tree/branchName] [BRANCH]`   | `обновите https://github.com/ton-blockchain/mytonctrl/tree/master test` | Обновление из ветки, указанной вторым аргументом указанного репозитория         |

### обновить

Обновить узел. Комбинации параметров:

| Имя формата                  | Формат                                                                        | Пример                                                                | Описание                                                                       |
| :--------------------------- | :---------------------------------------------------------------------------- | :-------------------------------------------------------------------- | ------------------------------------------------------------------------------ |
| Без дуг                      | `улучшение`                                                                   | `улучшение`                                                           | Обновить с текущего репозитория                                                |
| Формат URL                   | `upgrade [https://github.com/author/repo/tree/branch]`                        | `upgrade https://github.com/ton-blockchain/ton/tree/master`           | Обновление с указанного URL                                                    |
| Формат только ветки          | `upgrade [BRANCH]`                                                            | `улучшить мастер`                                                     | Обновить с указанной ветки репозитория                                         |
| Формат переопределения ветки | `upgrade [https://github.com/authorName/repoName/tree/branchName] [BRANCH]`   | `обновите https://github.com/ton-blockchain/ton/tree/master testnet`  | Обновление с ветки, указанной вторым аргументом указанного репозитория         |

### статус

Получить текущий статус mytonctrl и узла. Комбинации параметров:

| Имя формата    | Формат        | Пример        | Описание                                                                                                            |
| -------------- | ------------- | ------------- | ------------------------------------------------------------------------------------------------------------------- |
| Без дуг        | `статус`      | `статус`      | Полный отчет о состоянии, включая эффективность валидатора и онлайн валидаторы.                                     |
| Быстрое        | `status fast` | `status fast` | Должен быть использован на TestNet. Отчет о состоянии без эффективности валидатора и количества онлайн-валидаторов. |

[Подробнее о статусе](/v3/documentation/infra/nodes/mytonctrl/mytonctrl-status)

### установщик

Нет args, запускает инсталлятор модулей TON (script /usr/src/mytonctrl/mytoninstaller.py)

### режимы состояния

Нет аргов, показать режимы MTC.

### настройки состояния

Нет аргов, показать все доступные настройки с их описанием и значениями.

### включить _режим

Включить определенный режим.

```bash
MyTonCtrl> включить _режим <mode_name>
```

Например:

```bash
MyTonCtrl> проверка включения_режима
```

### выключить _режим

Отключить определенный режим.

```bash
MyTonCtrl> отключить _режим <mode_name>
```

Например:

```bash
MyTonCtrl> отключить валидатор
```

### о нас

Предоставьте описание указанного режима

```bash
MyTonCtrl> об <mode_name>
```

Например:

```bash
MyTonCtrl> о валидаторе
```

### получить

Получить значение определенного параметра в формате JSON

```bash
MyTonCtrl> get <setting_name>
```

Например:

```bash
MyTonCtrl> get stake
```

### набор

Задать указанное значение для заданного параметра. Пропустите установку проверки существования, если `--force` включен

```bash
MyTonCtrl> набор <setting> <value> [--force]
```

Например:

```bash
Установка MyTonCtrl> 9000
```

### rollback

Без аргонов, откат к митонктрлу 1.0. Нельзя использовать mytonctrl 1.0 ни в коем случае.

### getconfig

Получает и печатает JSON представление конфигурации, указанной в `<config-id>`

```bash
MyTonCtrl> getconfig <config_id> # идентификатор конфигурации может быть опущен
```

Например:

```bash
MyTonCtrl> getconfig 0
```

### get_pool данные

Извлекает и печатает представление JSON данных пула, указанных в `<pool-name>` или `<pool-addr>`.

```bash
MyTonCtrl> get_pool_data <<pool-name> | <pool-addr>>
```

Например:

```bash
get_pool_data pool_name # Вы можете проверить возможные имена пулов с помощью ls /home/install_mytonctrl/.local/share/mytoncore/pools
```

## Наслоения

Подробнее о [накладываемых изображениях](/v3/guidelines/nodes/custom-overlays).

### add_custom_overlay

Добавляет пользовательское наложение с данным `<name>`, используя конфигурацию, указанную в `<path_to_config>`

```bash
MyTonCtrl> add_custom_overlay <name> <path_to_config>
```

Например:

```bash
add_custom_overlay пользовательский /config.json # проверьте ссылку сверху, чтобы узнать, какую конфигурацию требуется эта команда (/v3/guidelines/nodes/custom-overlays)
```

### list_custom_overlays

Нет аргов, печати пользовательских наслоений

### delete_custom_overlay

Удаляет пользовательское наложение с указанным `<name>`

```bash
MyTonCtrl> delete_custom_overlay <name>
```

## Validator

### vo

Голоса за предложение, указанное в `<offer-hash>`

```bash
MyTonCtrl> vo <offer-hash> # используйте `ol` для получения предложений
```

### е

Нет аргов, голосуйте за выборы

### vc

Голоса за жалобу, указанную `<complaint-hash>` на выборах, указанных \`<election-id>

```bash
MyTonCtrl> vc <election-id> <complaint-hash>
```

На самом деле, даже это сработает, но вы должны использовать данные из вашего текущего состояния mytonctrl:

```bash
MyTonCtrl> vc 0 0
```

### чек_эф

Данные об эффективности валидаторов по текущим и предыдущим раундам.

**Примечание**: Эффективность текущего раунда становится более точной по мере продвижения раунда.

На основе `validator index` (может быть получен командой `status`), есть три возможных сценария:

- **Индекс валидатора находится в диапазоне [0, `max_main_validators`)**:
  «Эффективность валидации» должна быть больше 90% (число может быть изменено в будущем на основании статистики) на протяжении всего раунда; В противном случае, штраф (штраф) может быть наложен.

- **Индекс проверки находится в диапазоне [`max_main_validators`, `max_validators`)**:
  `validator efficiency` должен быть больше 90% (число может быть изменено в будущем по статистике) для полного раунда. В настоящее время штраф не применяется, но это может измениться в будущих обновлениях.

- **The user is not a validator**:
  No penalties apply, but the user is not eligible for rewards either. Нет `validator efficiency` для проверки. Это может быть вызвано низкой долей или неправильной конфигурацией узла. Кроме того, убедитесь, что `mytonctrl` работает непрерывно.

Подробнее о `max_validators` и `max_main_validators` [на странице параметров конфигурации](/v3/documentation/network/configs/blockchain-configs#configuration-parameters-for-the-number-of-validators-for-elections). Получить фактические значения [для mainnet](https://tonviewer.com/config#16) и [для testnet](https://testnet.tonviewer.com/config#16).

## Пул команд

Подробнее о [на странице пула кандидатов](/v3/documentation/smart-contracts/contracts-specs/nominator-pool).

### депозит в пул

Внесите средства в указанный `<amount>` в пул, указанный \`<pool-addr>

```bash
MyTonCtrl> deposit_to_pool <pool-addr> <amount>
```

Например:

```bash
MyTonCtrl> deposit_to_pool kf_JcC5pn3etTAdwOnc16_tyMmKE8-ftNUnf0OnUjAIdJpX 1
```

### отозвать из пула

Вывод указанного `<amount>` из пула, указанного `<pool-addr>`

```bash
MyTonCtrl> withdraw_from_pool <pool-addr> <amount>
```

Например:

```bash
MyTonCtrl> withdraw_from_pool kf_JcC5pn3etTAdwOnc16_tyMmKE8-ftNUnf0OnUjAIdJpX 1
```

### очистка

Нет базы данных аргентов, валидатора очистки

### benchmark

Нет аргументов, таблиц печати с несколькими тестами

## Одиночный бассейн

Более подробную информацию о [на странице пула однозначных кандидатов](/v3/documentation/smart-contracts/contracts-specs/nominator-pool).

### новый одноименный пул

Создает новый одиночный пул с указанным `<pool-name>` и \`<owner-address>

```bash
MyTonCtrl> new_single_pool <pool-name> <owner-address>
```

Например:

```bash
MyTonCtrl> new_single_pool имя kf9tZrL46Xjux3ZqvQFSgQkOIlteJK52slSYWbasqtOjrKUT
```

### включить пул

Активирует одиночный пул, указанный `<pool-name>`

```bash
MyTonCtrl> activate_single_pool <pool-name> # Имя пула сверху
```

## Управление кошельком

### Импорт кошелька

MyTonCtrl поддерживает различные типы контрактов, похожих на кошельки, включая wallet-v1, wallet-v3, [lockup-wallet](https://github.com/ton-blockchain/lockup-wallet-contract/tree/main/universal) и другие. Зачастую это обеспечивает простой способ взаимодействия с этими контрактами.

#### Импорт использования приватного ключа

Если у вас есть доступ к приватному ключу, вы можете легко импортировать кошелек:

```bash
MyTonCtrl> iw <wallet-addr> <wallet-secret-key>
```

Вот `<wallet-secret-key>` является вашим приватным ключом в формате base64.

Например:

```bash
MyTonCtrl> iw kf9tZrL46Xjux3ZqvQFSgQkOIlteJK52slSYWbasqtOjrKUT AAAH++/ve+/vXrvv73vv73vv73vv71DWu+/vWcpA1E777+92Ijvv73vv70iV++/ve+/vUTvv70d77+9UFjvv71277+9bO+/ve+/vXgzdzzvv71i77+977+9CjLvv73vv73vv71i77+9Bu+/vV0oJe+/ve+/vUPvv73vv73vv70=
```

#### Импортирование с использованием мнемонической фразы

Если у вас есть мнемоническая фраза (последовательность из 24 слов, таких как `tattoo во время ...`), следуйте инструкциям:

1. Установить Node.js.
2. Клонировать и установить [mnemonic2key](https://github.com/ton-blockchain/mnemonic2key):
   ```
   git clone https://github.com/ton-blockchain/mnemonic2key.git
   cd mnemonic2key
   npm install
   ```
3. Выполните следующую команду, заменив `word1`, `word2`... с вашей мнемонической фразой и `address` с адресом вашего кошелька:
   ```
   node index.js word1 word2 ... word24 [address]
   ```
4. Скрипт генерирует `wallet.pk` и `wallet.addr`. Переименуйте их в `imported_wallet.pk` и `imported_wallet.addr`.
5. Скопируйте оба файла в папку `~/.local/share/mytoncore/wallets/`.
6. Откройте консоль mytonctrl и перечислите кошельки, используя команду `wl`.
7. Проверьте, что кошелек был импортирован и отображает правильный баланс.
8. Теперь вы можете отправить средства с помощью команды `mg`. Введите `mg` для просмотра документации по справке.
   Не забудьте заменить метки-заполнители (слова внутри `< >`) своими фактическими значениями при выполнении команд.

### Показать список кошельков

```bash
MyTonCtrl> wl
```

![](/img/docs/mytonctrl/wl.png)

### Создать новый локальный кошелек

Также вы можете создать новый пустой кошелек:

```bash
MyTonCtrl> nw <workchain-id> <wallet-name> [<version> <subwallet>]
```

Например:

```bash
MyTonCtrl> nw 0 имя v3 # по умолчанию подкошелек 0x29A9A317 + workchain
```

### Активировать локальный кошелек

Если вы хотите использовать кошелек, он должен быть активирован:

```bash
MyTonCtrl> aw <wallet-name>
```

Но перед активацией, отправьте 1 Toncoin в кошелек:

```bash
MyTonCtrl> wl
Баланс имени статуса Ver Wch Address
validator_wallet_001 активен 994. 76032511 v1 -1 kf_dctjwS4tqWdeG4GcCLJ53rkgxZOGGrdDzHJ_mxPkm_Xct
wallet_004 uninit 0. v1 0 0QBxnZJq4oHVFs4ban3kJ5qllM1IQo57lIx8QP69Ue9A6Kbs

MyTonCtrl> mg validator_wallet_001 0QBxnZJq4oHVFs4ban3kJ5qllM1IQo57lIx8QP69Ue9A6Kbs 1
```

Затем активируйте:

```bash
MyTonCtrl> aw Wallet_004
Активировать кошелек - OK

MyTonCtrl> wl
Баланс имени пользователя Ver Wch Address
validator_wallet_001 активен 994. 76032511 v1 -1 kf_dctjwS4tqWdeG4GcCLJ53rkgxZOGGrdDzHJ_mxPkm_Xct
wallet_004 active 0. 98256399 v1 0 kQBxnZJq4oHVFs4ban3kJ5qllM1IQo57lIx8QP69Ue9A6Psp
```

### Получить номер последовательности кошелька

```bash
MyTonCtrl> seqno <wallet-name>
```

![](/img/docs/mytonctrl/nw.png)

### Установить версию кошелька

Эта команда необходима, когда используется модифицированный кошелек с методами взаимодействия, похожими на обычный.

```bash
MyTonCtrl> swv <wallet-addr> <wallet-version>
```

Например:

```bash
MyTonCtrl> swv kf9tZrL46Xjux3ZqvQFSgQkOIlteJK52slSYWbasqtOjrKUT v3
```

### Экспорт кошелька

Возможно получить адрес кошелька и секретный ключ.

```bash
MyTonCtrl> ew <wallet-name>
```

![](/img/docs/mytonctrl/ew.png)

### Удалить локальный кошелек

```bash
MyTonCtrl> dw <wallet-name>
```

![](/img/docs/mytonctrl/dw.png)

## Команды аккаунта и транзакций

### Статус аккаунта

Для проверки состояния счета и истории транзакций используйте следующую команду:

```bash
MyTonCtrl> vas <account-addr> # Например, вы можете получить адрес проверки кошелька wl командой wl и использовать vas для получения дополнительной информации
```

![](/img/docs/mytonctrl/vas.png)

### История аккаунта

Чтобы проверить историю транзакций по счету, используйте следующую команду, используя число перечисленных операций в качестве «limit»:

```bash
MyTonCtrl> vah <account-addr> <limit> # предел - это просто неподписанное целое число
```

![](/img/docs/mytonctrl/vah.png)

### Перевод монет

Перевод монет с локального кошелька на аккаунт:

```bash
MyTonCtrl> mg <wallet-name> <account-addr | bookmark-name> <amount>
```

Например:

```bash
MyTonCtrl> mg wallet_004 kQBxnZJq4oHVFs4ban3kJ5qllM1IQo57lIx8QP69Ue9A6Psp 1
```

:::caution
Версия кошелька 'v4' не поддерживается для передачи
:::

### Передать монеты через прокси

Перевод монет с локального кошелька на аккаунт через прокси:

```bash
MyTonCtrl> mgtp <wallet-name> <account-addr | bookmark-name> <amount>
```

Например:

```bash
MyTonCtrl> mgtp wallet_004 kQBxnZJq4oHVFs4ban3kJ5qllM1IQo57lIx8QP69Ue9A6Psp 1
```

## Команды общих пулов

Существует два типа пулов в **MyTonCtrl**:

1. [Номинатор Пул](/v3/documentation/smart-contracts/contracts-specs/nominator-pool)
2. [Единичный Номинатор Пула](/v3/documentation/smart-contracts/contracts-specs/single-nominator-pool)

Все они управляются следующими командами:

### Список пулов

```bash
Пулы_лист MyTonCtrl>
```

![](/img/docs/mytonctrl/test-pools-list.png)

### Удалить пул

```bash
MyTonCtrl> удалить_пул <pool-name>
```

### Импортирование фонда

Вы можете создать пул в список локальных пулов:

```bash
MyTonCtrl> im_pool <pool-name> <pool-addr>
```

Например:

```bash
MyTonCtrl> имя импорта kf_JcC5pn3etTAdwOnc16_tyMmKE8-ftNUnf0OnUjAIdJpX
```

## Закладки

Вы можете создать псевдоним (закладка) для адреса аккаунта, чтобы упростить его использование.

### Создать новую закладку

```bash
MyTonCtrl> nb <bookmark-name> <account-addr | domain-name>
```

![](/img/docs/mytonctrl/nb.png)

### Показать список закладок

```bash
MyTonCtrl> bl
```

![](/img/docs/mytonctrl/bl.png)

### Удалить закладку

```bash
MyTonCtrl> db <bookmark-name> <bookmark-type>
```

![](/img/docs/mytonctrl/db.png)

## Другие команды mytonctrl

### ol

Показать список предложений

| Имя формата          | Формат           | Описание                                                                                          |
| -------------------- | ---------------- | ------------------------------------------------------------------------------------------------- |
| Нет аргументов       | `ol`             | Печатает таблицу с уменьшенными хэшами.                                                           |
| Вывод JSON           | `ol --json`      | Выводит JSON представление `data`.                                                                |
| Полный хэш выход     | `ol hash`        | Выводит таблицу с полными хэшами.                                                                 |
| JSON с полным хэшем  | `ol --json hash` | Выводит JSON представление `data`. Аргумент «хэш» не имеет эффекта в данном случае.               |

### д

Извлекает разницу предложений

```bash
MyTonCtrl> od [offer-hash]
```

### el

Показать список выборов

| Имя формата                           | Формат                               | Описание                                                                          |
| ------------------------------------- | ------------------------------------ | --------------------------------------------------------------------------------- |
| Нет аргументов                        | `el`                                 | Печатает таблицу с ADNL, Pubkey, и Wallet уменьшен.                               |
| Любая комбинация следующих аргументов | `el --json adnl pubkey кошелек past` | Полные записи ADNL, Pubkey, Wallet, и прошлых выборов в представительстве JSON.   |

Описания для каждого арг:

- \--json: Вывод данных в формате JSON.
- прошлое: Включает в себя прошлые выборы.
- adnl: Вывод полного ADNL.
- pubkey: Печатает полный пубки.
- кошелек: Выводит полный кошелек.

### вл

Показать активные валидаторы

| Имя формата                            | Формат                                  | Описание                                                                             |
| -------------------------------------- | --------------------------------------- | ------------------------------------------------------------------------------------ |
| Нет аргументов                         | `vl`                                    | Печатает таблицу с ADNL, Pubkey, и Wallet уменьшен.                                  |
| Любая комбинация следующих аргументов  | `vl --json adnl pubkey кошелек past`    | Полные записи ADNL, Pubkey, Wallet, и прошлых валидаторов в представительстве JSON.  |

Описания для каждого арг:

- \--json: Вывод данных в формате JSON.
- прошлое: Включает в себя прошлые записи валидатора.
- adnl: Вывод полного ADNL.
- pubkey: Печатает полный пубки.
- кошелек: Выводит полный кошелек.
- оффлайн: исключает онлайн-валидаторы.

### сл

Показать список жалоб

| Имя формата                           | Формат                | Описание                                                                                                          |
| ------------------------------------- | --------------------- | ----------------------------------------------------------------------------------------------------------------- |
| Нет аргументов                        | `Cl`                  | Печатает таблицу с сокращенным ADNL.                                                                              |
| Любая комбинация следующих аргументов | `cl --json adnl past` | Полная ADNL с прошлыми жалобами в JSON.                                                                           |

Описание каждого параметра:

- \--json: Вывод данных в формате JSON.
- прошлое: Включает в себя прошлые жалобы.
- adnl: Вывод полного ADNL.

## Установщик

В этом разделе описывается подконсоль `installer`, которая может быть открыта командой

```bash
Установщик MyTonCtrl>
```

Например:

![img.png](/img/docs/mytonctrl/installer.png)

Все команды можно вызвать непосредственно из консоли MyTonCtrl

```bash
Установщик MyTonCtrl> [command] [args]
```

### помощь

Печать всех доступных команд

### очистить

очистить терминал

### выйти

выйти из терминала mytoninstaller

### статус

Печать статуса Сервисов (полного узла, Mytoncore, V.console, Liteserver) и аргументов узла

### установить аргумент_узел

| Имя формата               | Формат                                      | Описание                                                                                                          |
| ------------------------- | ------------------------------------------- | ----------------------------------------------------------------------------------------------------------------- |
| Добавить или заменить arg | `set_node_argument [-ARG_NAME] [ARG_VALUE]` | Добавьте аргумент или замените его значение, если оно существует. `-ARG_NAME` должен иметь `-` или `--` в начале  |
| Удалить арг               | `set_node_argument [-ARG_NAME] -d`          | Удалить аргумент из списка.                                                                                       |

Возможные аргументы:

| Имя аргумента узла | Описание                                                                                                     | Значение по умолчанию                                                                       |
| ------------------ | ------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------- |
| `потоки`           | количество потоков                                                                                           | `cpus count - 1`                                                                            |
| `daemonize`        |                                                                                                              | Нет значения                                                                                |
| `global-config`    | путь к глобальной конфигурации                                                                               | `/usr/bin/ton/global.config.json`                                                           |
| `db`               | путь к базе данных                                                                                           | `/var/ton-work/db/`                                                                         |
| `logname`          | путь к журналам                                                                                              | `/var/ton-work/log`                                                                         |
| `state-ttl`        | ttl в блокчейне состоят, что узел хранит                                                                     | 3600                                                                                        |
| `archive-ttl`      | ttl блоков узлов магазинов. _Чтобы заставить узел не сохранять архивные блоки, используйте значение `86400`_ | 2592000 если режим liteserver был включен во время установки, в противном случае 86400      |

Например:

```bash
MyTonInstaller> set_node_argument --state-ttl 3601
```

Например:

```bash
MyTonInstaller> set_node_argument --state-ttl 3601
```

### включить

Включите один из режимов, чтобы `ton-http-api` создал конфигурацию

```bash
MyTonInstaller> включил <MODE_NAME>
```

Режимы могут иметь следующие имена:

- FN - полный узел
- VC - консоль валидатора
- LS - Lite Server
- DS - DHT сервер
- JR - Jsonrpc
- THA - TON HTTP API
- LSP - ls proxy
- TSP - TON хранилище + TON хранилище

Например:

```bash
MyTonInstaller> включить FN
```

### Обновить

То же, что и `enable` от mytoninstaller

```bash
MyTonInstaller> обновить FN
```

### plsc

Print liteserver config

Например:

```json
{
    "ip": 1111111111,
    "port": 11111,
    "id": {
        "@type": "pub.ed25519",
        "key": "UURGaaZjsBbKHvnrBqslHerXYbMCVDKdswKNJvAHkc="
    }
}
```

### клок

Создать локальный файл конфигурации (по умолчанию `/usr/bin/ton/local.config.json`)

### вывести прокси-файл

Распечатывает конфигурацию прокси

### файл конфигурации

Пока ничего не делайте в стадии разработки

### drvcf

Опасный файл конфигурации проверки восстановления

### setwebpass

Нет аргонов. Установите пароль для веб-интерфейса администратора, запускается `python3 /usr/src/mtc-jsonrpc/mtc-jsonrpc.py -p`.

## Смотреть также

- [FAQ](/v3/guidelines/nodes/faq)
- [Troubleshooting](/v3/guidelines/nodes/nodes-troubleshooting)
