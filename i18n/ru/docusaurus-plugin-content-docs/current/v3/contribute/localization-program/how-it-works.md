# Как это работает

![как это работает](/img/localizationProgramGuideline/localization-program.png)

**Программа локализации лабораторий TownSquare** состоит из нескольких ключевых компонентов. В этой главе мы расскажем о том, как работает программа, помогая вам понять ее работу и эффективно ее использовать.

В рамках этой системы мы интегрируем несколько приложений, чтобы бесшовно функционировать как единая программа:

- **GitHub**: Hosts the documentation, synchronize docs from the upstream repository, and syncs translations to specific branches.
- **Crowdin**: Управляет процессами перевода, включая перевод и корректировку и настройку языка.
- **AI Systems**: использует продвинутый AI для помощи переводчикам, обеспечивая бесперебойный рабочий процесс.
- **Настраиваемый Глоссарий**: Инструменты переводчиков и гарантируют, что ИИ генерирует точные переводы на основе контекста проекта. Пользователи также могут загружать свои словари по мере необходимости.

:::info
Это руководство не охватывает весь процесс детально, но в нем будут выделены ключевые компоненты, которые делают программу локализации TownSquare уникальной. Вы можете самостоятельно изучить программу.
:::

## Синхронизация GitHub для документации и переводов

Наш репозиторий использует несколько филиалов для управления документацией и переводами. Ниже приводится подробное описание цели и функций каждой специальной ветви:

### Обзор ветвей

- **`dev`**\
  Ветка `dev` запускает GitHub для выполнения задач синхронизации. Конфигурации рабочего процесса можно найти в директории [**`.github/workflows`**](https://github.com/TownSquareXYZ/ton-docs/tree/dev/.github/workflows):

  - **`sync-fork.yml`**: Этот рабочий процесс синхронизирует документацию из исходного репозитория. Он работает ежедневно в 00:00.
  - **`sync-translations.yml`**: Этот рабочий процесс синхронизирует обновленные переводы в соответствующие ветви языка для предварительного просмотра на соответствующих языках.

- **`main`**\
  Эта ветка синхронизируется с исходным репозиторием с GitHub действиями, работающими в ветке `dev`. Он также используется для обновления некоторых кодов, которые мы намерены предложить первоначальному репозиторию.

- **`l10n_main`**\
  Эта ветка включает в себя все изменения из ветки `main` и переводы из Crowdin. Все изменения в этой ветке периодически фиксируются в исходном репозитории с помощью новой ветки `l10n_main_[некоторые данные]`.

- **`l10n_feat` или `l10n_feat_[specific functions]`**\
  Эта ветка будет включать изменения в код или документацию, относящиеся к системе перевода. Как только все содержимое будет завершено, изменения в этой ветке будут объединены в `l10_main`.

- **`[lang]_preview`**\
  Эти ветви предназначены для предпросмотра определенных языков, таких как `ko_preview` для корейского и `ja_preview` для японского языка. Они позволяют нам просматривать сайт на разных языках.

Поддерживая эти ветки и используя действия GitHub, мы эффективно управляем синхронизацией нашей документации и обновлениями перевода, гарантируя, что содержание нашего многоязычного контента всегда в курсе.

## Как настроить новый проект Crowdin

1. Войдите в [**Crowdin аккаунт**](https://accounts.crowdin.com/login).

2. Нажмите `Create new project` в меню.
   ![Создайте новый проект](/img/localizationProgrameline/howItWorked/create-new-project.png)

3. Укажите название проекта и целевые языки. Вы можете изменить языки в настройках позже.
   ![Создание настроек проекта](/img/localizationProgrameline/howItWorked/create-project-setting.png)

4. Перейдите на проект, который вы только что создали, выберите вкладку Интеграции, нажмите кнопку «Добавить Интеграцию», найдите `GitHub` и установите его.
   ![install-github-integration](/img/localizationProgrameline/howItWorked/install-github-integration.png)

5. Перед настройкой интеграции с GitHub на Crowdin, укажите какие файлы загрузить в Crowdin, чтобы избежать загрузки ненужных файлов:

   1. Создайте файл **crowdin.yml** в корне **вашего репозитория GitHub** с базовой конфигурацией:

   ```yml
   project_id: <Your project id>
   preserve_hierarchy: 1
   файлы:
     - source: <Path of your original files>
       translation: <Path of your translated files>
   ```

   2. Получить правильные значения конфигурации:
      - **project_id**: В вашем проекте Crowdin, перейдите на вкладку Инструменты, выберите API и найдите **project_id** там.
        ![select-api-tool](/img/localizationProgrameline/howItWorked/select-api-tool.png)
        ![projectId](/img/localizationProgrameline/howItWorked/projectId.png)
      - **preserve_hierarchy**: поддерживает структуру директорий GitHub на сервере Crowdin.
      - **source** и **translation**: Укажите пути для загрузки файлов в Crowdin, где должны быть переведены файлы.

        Для примера обратитесь к [**нашему официальному конфигурационному файлу**](https://github.com/TownSquareXYZ/ton-docs/blob/localization/crowdin.yml).\
        Более подробную информацию можно найти в [**Конфигурационной документации Crowdin**](https://developer.crowdin.com/configuration-file/).

6. Настройте Crowdin для подключения к репозиторию GitHub:
   1. Нажмите `Add Repository` и выберите `Source and translation files mode`.
      ![select-integration-mode](/img/localizationProgrameline/howItWorked/select-integration-mode.png)
   2. Подключите вашу учётную запись GitHub и найдите репозиторий, который вы хотите перевести.
      ![search-repo](/img/localizationProgrameline/howItWorked/search-repo.png)
   3. Выберите ветку слева, которая создаст новую ветку, где Crowdin будет размещать переводы.
      ![setting-branch](/img/localizationProgrameline/howItWorked/setting-branch.png)
   4. Выберите частоту обновления переводов на вашу ветку GitHub. Для других конфигураций можно сохранить настройки по умолчанию, затем нажмите кнопку "Сохранить", чтобы включить интеграцию.
      ![frequency-save](/img/localizationProgrameline/howItWorked/frequency-save.png)

См. [**GitHub integration documentation**](https://support.crowdin.com/github-integration/) для получения дополнительной информации.

7. Наконец, вы можете нажать кнопку `Sync Now`, чтобы синхронизировать репозиторий и переводы, когда это необходимо.

## Glossary

### Что такое глоссарий?

Иногда переводчики ИИ не могут распознать специфические термины, которые не должны быть переведены. Например, мы не хотим, чтобы "Расстояние" переведен с точки зрения языка программирования. Чтобы предотвратить такие ошибки, мы используем глоссарий для руководства переводами.

**Глоссарий** позволяет создавать, хранить и управлять терминологией конкретных проектов в одном месте и обеспечивать согласованный перевод терминов.

Вы можете проверить [**ton-i18n-glossary**](https://github.com/TownSquareXYZ/ton-i18n-glossary) для справки.
![ton-i18n-glossary](/img/localizationProgrameline/howItWorked/ton-i18n-glossary.png)

### Как настроить глоссарий для нового языка?

Большинство платформ поддерживают глоссарий. В Crowdin, после создания глоссария, каждый термин появляется в редакторе как подчеркнутое слово. Перевод, часть речи и определение (если предоставляется).
![github-glossary](/img/localizationProgrameline/howItWorked/github-glossary.png)
![crowdin-glossary](/img/localizationProgramGuideline/howItWorked/crowdin-glossary.png)

В DeepL загрузите ваш глоссарий и он будет автоматически использоваться во время ИИ перевода.

Мы создали [**программу для глоссария**](https://github.com/TownSquareXYZ/ton-i18n-glossary) для обновлений автозагрузки.

Чтобы добавить термин в глоссарий:

1. Если термин Английский уже существует в глоссарии, найдите соответствующую строку и столбец для языка, который вы хотите перевести и загрузить перевод.
2. Чтобы загрузить новый глоссарий, клонируйте проект и запустите:

   - `npm i`
   - `npm запустить сгенерировать -- <glossary name you want>`

Повторите шаг 1, чтобы добавить новый термин.

**Простой и эффективный, не так ли?**

## Как получить преимущество в переводе с AI Copilot?

Копилот AI помогает устранить языковые барьеры с различными преимуществами:

- **Улучшенная последовательность**: ИИ переводы основаны на новейшей информации, предоставляющей наиболее точные и актуальные переводы.
- **Скорость и эффективность перевода**: ИИ перевод мгновенно, обрабатывается большим объемом контента в режиме реального времени.
- **Качество переводов**: системы ИИ постоянно изучают и совершенствуют качество перевода со временем. With the provided glossary, AI translations can be tailored to the specific needs of different repositories.

Чтобы использовать ИИ перевод на Crowdin (мы используем DeepL в нашем проекте):

1. Выберите машинный перевод в меню Crowdin и нажмите кнопку «Изменить» на линии DeepL.
   ![select-deepl](/img/localizationProgrameline/howItWorked/select-deepl.png)
2. Включите поддержку DeepL и введите ключ API DeepL Translator.
   > [Как получить ключ API для переводчиков DeepL](https://www.deepl.com/pro-api?cta=header-pro-api)

![config-crowdin-deepl](/img/localizationProgrameline/howItWorked/config-crowdin-deepl.png)

3. Наша установка DeepL использует пользовательский глоссарий. Проверьте [**ton-i18n-glossary**](https://github.com/TownSquareXYZ/ton-i18n-glossary) для получения подробной информации о загрузке глоссария.

4. В репозитории нажмите кнопку «Предварительный перевод» и выберите пункт «Машинный перевод».
   ![pre-translation](/img/localizationProgrameline/howItworked/pre-translation.png)

5. Выберите DeepL в качестве движка перевода, выберите нужные языки и выберите файлы для перевода.
   ![pre-translate-config](/img/localizationProgrameline/howItWorked/pre-translate-config.png)

Вот и все! Теперь вы можете сделать перерыв и дождаться предварительного перевода.
